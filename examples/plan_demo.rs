use ariste::{Agent, SubAgentType};

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    println!("=== Plan å­ä»£ç†æ¼”ç¤º ===\n");

    // åˆ›å»º Agent
    let mut agent = Agent::load_from_config().await?;

    // ç¤ºä¾‹ 1: ä½¿ç”¨ Plan å­ä»£ç†è®¾è®¡å®ç°æ–¹æ¡ˆ
    println!("ğŸ“‹ ä»»åŠ¡ 1: è®¾è®¡ç”¨æˆ·è®¤è¯ç³»ç»Ÿ");
    println!("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n");

    let result = agent
        .spawn_task(
            SubAgentType::Plan,
            "è®¾è®¡ç”¨æˆ·è®¤è¯ç³»ç»Ÿ",
            "éœ€è¦ä¸º Web åº”ç”¨è®¾è®¡ä¸€ä¸ªç”¨æˆ·è®¤è¯ç³»ç»Ÿã€‚è¦æ±‚æ”¯æŒï¼š
1. ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
2. JWT token è®¤è¯
3. å¯†ç åŠ å¯†å­˜å‚¨
4. Session ç®¡ç†

è¯·åˆ†æå½“å‰ä»£ç åº“ç»“æ„ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œå¹¶æä¾›è¯¦ç»†çš„å®ç°æ–¹æ¡ˆã€‚",
        )
        .await?;

    println!("{}\n", result);

    // ç¤ºä¾‹ 2: ä½¿ç”¨ Plan å­ä»£ç†è¿›è¡Œæ¶æ„å†³ç­–
    println!("ğŸ“‹ ä»»åŠ¡ 2: é€‰æ‹©æ•°æ®åº“æ–¹æ¡ˆ");
    println!("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n");

    let result = agent
        .spawn_task(
            SubAgentType::Plan,
            "é€‰æ‹©æ•°æ®åº“æ–¹æ¡ˆ",
            "æˆ‘ä»¬éœ€è¦ä¸ºä¸€ä¸ªæ–°çš„åšå®¢ç³»ç»Ÿé€‰æ‹©æ•°æ®åº“ã€‚
ä¸»è¦éœ€æ±‚ï¼š
- æ”¯æŒæ–‡ç« ã€è¯„è®ºã€ç”¨æˆ·æ•°æ®
- è¯»å¤šå†™å°‘
- éœ€è¦å…¨æ–‡æœç´¢
- é¢„æœŸæ•°æ®é‡ï¼šç™¾ä¸‡çº§

è¯·åˆ†æä¸åŒæ•°æ®åº“æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼Œå¹¶ç»™å‡ºå»ºè®®ã€‚",
        )
        .await?;

    println!("{}\n", result);

    // ç¤ºä¾‹ 3: ä½¿ç”¨ Plan å­ä»£ç†è§„åˆ’é‡æ„ä»»åŠ¡
    println!("ğŸ“‹ ä»»åŠ¡ 3: è§„åˆ’ä»£ç é‡æ„");
    println!("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n");

    let result = agent
        .spawn_task(
            SubAgentType::Plan,
            "è§„åˆ’ä»£ç é‡æ„",
            "å½“å‰çš„ agent.rs æ–‡ä»¶å˜å¾—å¾ˆå¤æ‚ï¼Œéœ€è¦é‡æ„ã€‚
è¯·ï¼š
1. åˆ†æå½“å‰ä»£ç ç»“æ„
2. è¯†åˆ«å¯ä»¥æ”¹è¿›çš„åœ°æ–¹
3. æä¾›åˆ†æ­¥éª¤çš„é‡æ„è®¡åˆ’
4. è€ƒè™‘å‘åå…¼å®¹æ€§",
        )
        .await?;

    println!("{}\n", result);

    Ok(())
}
